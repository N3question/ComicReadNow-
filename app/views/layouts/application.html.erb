<!DOCTYPE html>
<html>
  <head>
    <title>ComicReadnow</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bruno+Ace&family=Shrikhand&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1+Code&display=swap" rel="stylesheet">

    <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body class="wrapper">
    <header class="fixed-top" style="border:1px solid #000;">
      <div class="d-flex" style="align-items: center; background-color:#00264D; height:auto;">
        
        <% if admin_signed_in? %>
            <div class="mx-4 my-3 d-flex">
              <h1 class="text-center px-2 text-light my-auto" style="width:45px; height:auto;">
                <i class="bi bi-journal-bookmark"></i>
              </h1>
              <h6 class="text-center px-2 text-light my-1 ml-1">
                <b>Comic<br>Read<br>now!</b>
              </h6>
            </div>
        <% else %>
            <%= link_to root_path, style:"text-decoration:none;" do %>
              <div class="mx-4 my-3 d-flex">
                <h1 class="text-center px-2 text-light my-auto" style="width:45px; height:auto;">
                  <i class="bi bi-journal-bookmark"></i>
                </h1>
                <h6 class="text-center px-2 text-light my-1 ml-1" style="font-family: 'Shrikhand', cursive;">
                  <b>Comic<br>Read<br>now!</b>
                </h6>
              </div>
            <% end %>
        <% end %>
        
        <nav class="navbar navbar-light my-auto ml-auto">
          <ul class="d-inline-flex flex-wrap mb-0 ml-auto pl-0" style="align-items: center; list-style:none;">
            
            <li class="nav-item mr-4">
                <% if admin_signed_in? %>
                <% else %>
                    <!--検索フォーム-->
                    <%= form_with url: search_index_comics_path, local: true, method: :get do |f| %>
                    <div class="input-group my-3" style="width:100%; box-shadow:8px 8px 4px #000;"><br />
                        <input type="text" id="txt-search" name="keyword" class="form-control input-group-prepend" placeholder="漫画タイトル" required="required"></input>
                        <span class="input-group-btn input-group-append">
                          <%= f.button type: 'submit', id: 'btn-search', class: 'btn text-info rounded-0', style: "background-color:white;" do %>
                            <i class="bi bi-search"></i>
                          <% end %>
                        </span>
                    </div>
                    <% end %>
                <% end %>
            </li>
              
            <!--ユーザ側ログイン後-->
            <% if user_signed_in? %>
              <li class="nav-item my-3 mr-4">
                  <b>
                  <%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class:"text-light", style:"text-decoration:none;" %>
                  </b>
              </li>
              
            <!--管理者ログイン後-->
            <% elsif admin_signed_in? %>
              <li class="nav-item mt-3 mr-3 mb-4" style="height:40px;">
                  <%= link_to destroy_admin_session_path, method: :delete, class:"text-light mr-3", style:"text-decoration:none;" do %>
                    <h1><b><i class="bi bi-box-arrow-right"></i></b></h1>
                  <% end %>
              </li>
              
            <!--ユーザ・管理者ログイン前-->
            <% else %>
              <li class="nav-item my-3 mr-4">
                  <b>
                  <%= link_to 'ログイン', new_user_session_path, class:"text-light", style:"text-decoration:none;" %>
                  </b>
              </li>
              <li class="nav-item my-3 mr-4">
                  <%= link_to '新規登録', new_user_registration_path, class:"btn rounded-pill px-4 form-control", style:"background-color:#66CC00; color:white;" %>
              </li>
            <% end %>
            
            <% if admin_signed_in? %>
            <% else %>
              <li class="my-3 ml-auto dropdown">
                  <a href="#" class="dropdown-toggle" style="color: #00264D;" data-toggle="dropdown" role="button">
                    <button class="navbar-toggler" style="border-color:white;" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                  </a>
                  
                  <ul class="dropdown-menu dropdown-menu-right py-4" role="menu" style="width:250px; box-shadow:10px 10px 20px #00264D;">
                    <% if user_signed_in? %>
                        <li class="mx-4 mb-3"><a href="/users/my_page" class="text-dark">マイページ</a></li>
                        <li class="mx-4 mb-4"><a href="/comics/bookmark_index" class="text-dark">MY本棚</a></li>
                    <% end %>
                    
                    <li><hr class="dropdown-divider m-0"></li>
                    <div class="d-flex flex-wrap" style="justify-content:center;">
                      <% @all_sites.each do |all_site| %>
                        <div class="site_name_header text-center py-3" style="width:120px;">
                            <%= link_to all_site.name, comic_site_index_comics_path(id: all_site.id) %>
                        </div>
                      <% end %>
                      <% if @all_site_count.odd? %>
                        <div class="site_name_header text-center py-3" style="width:120px;"></div>
                      <% end %>
                    </div>
                    <li class="mb-4"><hr class="dropdown-divider m-0" style=""></li>
                    <li class="mx-4 mb-3"><a href="#" class="text-dark">お知らせ</a></li>
                    <li class="mx-4 mb-3"><a href="#" class="text-dark">Comic Read now!とは</a></li>
                    <li class="mx-4"><a href="/admins/sign_in" class="text-dark"><i class="bi bi-gear btn btn-outline-dark btn-sm w-100"></i></a></li>
                  </ul>
              </li>
            <% end %>
          </ul>
        </nav>
      </div>
    </header>
    
    <main>
        <%= yield %>
    </main>
    
    <footer class="text-light" style="height:100px; border:1px solid #000; background-color:#00264D; line-height:100px;">
      <div class="d-flex justify-content-center">
        <p class="mb-0">© 2023 Comic Read now! All Rights Reserved.</p>
      </div>
    </footer>
  </body>
</html>
