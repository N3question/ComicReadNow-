<div class="container" style="margin-top:100px;">
  <div class="row" style="padding:30px 0px 45px;">
      
        <div class="mx-auto">
            <%= link_to root_path, class:"btn btn-sm mb-4 px-3 border", style:"color:#00264D;" do %>
              <i class="bi bi-arrow-left"></i>
            <% end %>
            
            <h5 class="ml-5 mb-5"><b>新着一覧</b></h5>
            <div class="d-inline-flex flex-wrap" style="justify-content:center;">
                <% @now_comics.each do |book| %>
                <% comic = Comic.find_by(isbn: book["isbn"]) %>
                  <div class="mx-2">
                    <div style="width:150px;">
                        <% if comic %>
                            <%= link_to comic_path(comic.id), class:"img_link" do %>
                              <%= image_tag book.large_image_url, style:"width:150px; height:230px; background-size: cover; border:0.5px solid #00264D; box-shadow:8px 8px 20px #999;" %>
                            <% end %>
                        <% else %>
                            <%= image_tag book.large_image_url, style:"width:150px; height:230px; background-size: cover; border:0.5px solid #00264D; box-shadow:8px 8px 20px #999;" %>
                        <% end %>
                    </div>
                    <div class="py-4 mb-3" style="width:150px; height:170px;">
                        <% if comic %>
                            <%= link_to comic_path(comic.id) do %>
                              <p class="mb-2" style="height:50px;"><b><%= book.title.truncate(19) %></b></p>
                            <% end %>
                        <% else %>
                            <p class="mb-2" style="height:50px;"><b><%= book.title.truncate(19) %></b></p>
                        <% end %>
                        <% if user_signed_in? && !comic %>
                            <%= link_to new_comic_path(isbn: book['isbn']), class:'btn btn-outline-dark w-100' do %>
                              <i class="bi bi-pencil-square"></i><small>　サイト情報追加</small>
                            <% end %>
                        <% end %>
                      </div>
                  </div>
                <% end %>
            </div>
            
            <div class="d-flex flex-wrap" style="justify-content:center;">
                <%= paginate @now_comics %>
            </div>
        </div>
      
  </div>
</div>

<span id="back" style="width:100%; display:none;">
  <a href=""  style="text-decoration:none;">
      <div class="d-flex justify-content-center border mt-5 mb-4 mx-auto" 
           style="width:95%; height:60px; line-height:60px; background-color:#FFF; box-shadow:5px 5px 5px #DDD;">
        <p class="mb-0 text-dark">TOPへ戻る<i class="bi bi-arrow-up"></i></p>
      </div>
  </a>
</span>

<script>
  $(function(){
    // ウィンドウの高さとmain要素の高さを取得
    var windowHeight = $(window).height();
    var mainHeight = $('main').height();

    // main要素の高さがウィンドウの高さより大きい場合
    if(mainHeight > windowHeight) {
        // 特定の要素を表示
        $('#back').show();
    } else {
        // そうでない場合、要素を非表示
        $('#back').hide();
    }
  })
</script>